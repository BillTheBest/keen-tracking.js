(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(d){(function(i){if(typeof define==="function"&&define.amd){define("keen",[],function(){return i()})}if(typeof a==="object"&&typeof c!=="undefined"){c.exports=i()}var h=null;if(typeof window!=="undefined"){h=window}else{if(typeof d!=="undefined"){h=d}else{if(typeof self!=="undefined"){h=self}}}if(h){h.Keen=i()}})(function(){var f=b("./");var g=b("./utils/extend");g(f.Client.prototype,b("./record-browser"));g(f.helpers,{getBrowserProfile:b("./helpers/getBrowserProfile"),getDatetimeIndex:b("./helpers/getDatetimeIndex"),getDomEventProfile:b("./helpers/getDomEventProfile"),getDomNodePath:b("./helpers/getDomNodePath"),getScreenProfile:b("./helpers/getScreenProfile"),getUniqueId:b("./helpers/getUniqueId"),getWindowProfile:b("./helpers/getWindowProfile")});g(f.utils,{each:b("./utils/each"),extend:g,parseParams:b("./utils/parseParams")});c.exports=f;return f})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./":9,"./helpers/getBrowserProfile":2,"./helpers/getDatetimeIndex":3,"./helpers/getDomEventProfile":4,"./helpers/getDomNodePath":5,"./helpers/getScreenProfile":6,"./helpers/getUniqueId":7,"./helpers/getWindowProfile":8,"./record-browser":10,"./utils/each":12,"./utils/extend":13,"./utils/parseParams":14}],2:[function(d,f,b){var a=d("./getScreenProfile"),g=d("./getWindowProfile");function c(){return{cookies:("undefined"!==typeof navigator.cookieEnabled)?navigator.cookieEnabled:false,codeName:navigator.appCodeName,language:navigator.language,name:navigator.appName,online:navigator.onLine,platform:navigator.platform,useragent:navigator.userAgent,version:navigator.appVersion,screen:a(),window:g()}}f.exports=c},{"./getScreenProfile":6,"./getWindowProfile":8}],3:[function(b,c,a){function d(f){var g=f||new Date();return{"hour-of-day":g.getHours(),"day-of-week":parseInt(1+g.getDay()),"day-of-month":g.getDate(),month:parseInt(1+g.getMonth()),year:g.getFullYear()}}c.exports=d},{}],4:[function(b,c,a){function d(f){if(!arguments.length){return{}}return{innerText:f.target.innerText,path:Keen.helpers.getDomPath(f.target).join(" > "),tagName:f.target.tagName,title:f.target.title}}c.exports=d},{}],5:[function(c,d,a){
/*!
  via: http://stackoverflow.com/a/16742828/2511985
  */
function b(l){if(!l.nodeName){return""}var f=[];while(l.parentNode!=null){var k=0;var g=0;for(var j=0;j<l.parentNode.childNodes.length;j++){var h=l.parentNode.childNodes[j];if(h.nodeName==l.nodeName){if(h===l){g=k}k++}}if(l.hasAttribute("id")&&l.id!=""){f.unshift(l.nodeName.toLowerCase()+"#"+l.id)}else{if(k>1){f.unshift(l.nodeName.toLowerCase()+":eq("+g+")")}else{f.unshift(l.nodeName.toLowerCase())}}l=l.parentNode}return f.slice(1)}d.exports=b},{}],6:[function(c,d,b){function a(){var h,f;if("undefined"==typeof window||!window.screen){return{}}h=["height","width","colorDepth","pixelDepth","availHeight","availWidth"];f={};for(var g=0;g<h.length;g++){f[h[g]]=window.screen[h[g]]?window.screen[h[g]]:null}f.orientation={angle:window.screen.orientation?window.screen.orientation.angle:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"};return f}d.exports=a},{}],7:[function(b,c,a){function d(){}c.exports=d},{}],8:[function(b,c,a){function d(){var f,h,g;if("undefined"==typeof document){return{}}f=document.body;h=document.documentElement;g={height:window.innerHeight||null,width:window.innerWidth||null,scrollHeight:Math.max(f.scrollHeight,f.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight)||null};if(window.screen){g.ratio={height:(window.screen.availHeight)?parseFloat((window.innerHeight/window.screen.availHeight).toFixed(2)):null,width:(window.screen.availWidth)?parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2)):null}}return g}c.exports=d},{}],9:[function(b,a,c){var g=b("component-emitter");var i=b("./utils/each");var h=this;var f=h.Keen;var d={debug:false,enabled:true,helpers:{},utils:{},version:"0.0.0"};d.Client=function(k){this.configure(k);d.emit("client",this)};d.Client.prototype.configure=function(k){var l=k||{};if(l.host){l.host.replace(/.*?:\/\//g,"")}if(l.protocol&&l.protocol==="auto"){l.protocol=location.protocol.replace(/:/g,"")}this.config={projectId:l.projectId,writeKey:l.writeKey,requestType:l.requestType||"jsonp",host:l.host||"api.keen.io/3.0",protocol:l.protocol||"https"};if(d.debug){this.on("error",d.log)}this.emit("ready")};d.Client.prototype.projectId=function(k){if(!arguments.length){return this.config.projectId}this.config.projectId=(k?String(k):null);return this};d.Client.prototype.writeKey=function(k){if(!arguments.length){return this.config.writeKey}this.config.writeKey=(k?String(k):null);return this};d.Client.prototype.url=function(m,l){var k;if(!this.projectId()){this.emit("error","Keen.Client is missing a projectId property");return}k=this.config.protocol+"://"+this.config.host+"/projects/"+this.projectId();if(m){k+=m}if(l){k+="?"+j(l)}return k};function j(l){var k=[];i(l,function(n,m){if("string"!==typeof n){n=JSON.stringify(n)}k.push(m+"="+encodeURIComponent(n))});return k.join("&")}g(d);g(d.Client.prototype);d.log=function(k){if(d.debug&&typeof console=="object"){console.log("[Keen IO]",k)}};d.noConflict=function(){h.Keen=f;return d};a.exports=d},{"./utils/each":12,"component-emitter":15}],10:[function(c,b,d){var f=c("./index");var i=c("./utils/base64");var m=c("./utils/each");b.exports={recordEvent:n,recordEvents:p};function n(t,x,w){var r=this,s,u,q,v;s=r.url("/events/"+encodeURIComponent(t));u=x||{};q=w;if(!o.call(r,q)){return}if(!t||typeof t!=="string"){l.call(r,"Collection name must be a string.",q);return}v=r.url("/events/"+encodeURIComponent(t),{api_key:this.writeKey(),data:i.encode(JSON.stringify(u)),modified:new Date().getTime()});if(v.length<a()){switch(this.config.requestType){case"xhr":j.call(this,"GET",v,null,null,q);break;case"beacon":g.call(this,v,q);break;default:k.call(this,v,q);break}}else{if(h()){j.call(this,"POST",s,u,q)}else{l.call(r,"URL length exceeds current browser limit, and XHR is not supported.")}}w=q=null}function p(t,u){var r=this,s,q;s=r.url("/events");q=u;u=null;if(!o.call(r,q)){return}if("object"!==typeof t||t instanceof Array){l.call(r,"First argument must be an object",q);return}if(arguments.length>2){l.call(r,"Incorrect arguments provided to #addEvents method",q);return}if(h()){j.call(this,"POST",s,t,q)}else{}u=q=null}function o(r){var q=r;r=null;if(!f.enabled){l.call(this,"Keen.enabled is set to false.",q);return false}if(!this.projectId()){l.call(this,"Keen.Client is missing a projectId property.",q);return false}if(!this.writeKey()){l.call(this,"Keen.Client is missing a writeKey property.",q);return false}return true}function l(s,q){var r="Event(s) not recorded: "+s;this.emit("error",r);if(q){q.call(this,r,null);q=null}}function a(){if("undefined"!==typeof window){if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){return 2000}}return 16000}function j(x,s,t,w){var r=this;var u;var v=h();var q=w;w=null;v.onreadystatechange=function(){var y;if(v.readyState==4){if(v.status>=200&&v.status<300){try{y=JSON.parse(v.responseText)}catch(z){f.emit("error","Could not parse HTTP response: "+v.responseText);if(q){q.call(r,v,null)}}if(q&&y){q.call(r,null,y)}}else{f.emit("error","HTTP request failed.");if(q){q.call(r,v,null)}}}};v.open(x,s,true);v.setRequestHeader("Authorization",r.writeKey());v.setRequestHeader("Content-Type","application/json");if(t){u=JSON.stringify(t)}if(x.toUpperCase()==="GET"){v.send()}if(x.toUpperCase()==="POST"){v.send(u)}}function h(){var q="undefined"==typeof window?this:window;if(q.XMLHttpRequest&&("file:"!=q.location.protocol||!q.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(r){}}return false}function k(q,z){var A=this,t=z,v=new Date().getTime(),x=document.createElement("script"),y=document.getElementsByTagName("head")[0],w="keenJSONPCallback",u=false;z=null;w+=v;while(w in window){w+="a"}window[w]=function(B){if(u===true){return}u=true;if(t){t.call(A,null,B)}r()};x.src=q+"&jsonp="+w;y.appendChild(x);x.onreadystatechange=function(){if(u===false&&this.readyState==="loaded"){u=true;s();r()}};x.onerror=function(){if(u===false){u=true;s();r()}};function s(){if(t){t.call(A,"An error occurred!",null)}}function r(){window[w]=undefined;try{delete window[w]}catch(B){}y.removeChild(x)}}function g(u,v){var s=this,q=v,r=document.createElement("img"),t=false;v=null;r.onload=function(){t=true;if("naturalHeight" in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height===0){this.onerror();return}}if(q){q.call(s)}};r.onerror=function(){t=true;if(q){q.call(s,"An error occurred!",null)}};r.src=u+"&c=clv1"}},{"./index":9,"./utils/base64":11,"./utils/each":12}],11:[function(b,c,a){c.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(f){var d="",l=0,h=this.map,k,j,g,s,r,q,p;f=this.utf8.encode(f);while(l<f.length){k=f.charCodeAt(l++);j=f.charCodeAt(l++);g=f.charCodeAt(l++);s=(k>>2);r=(((k&3)<<4)|(j>>4));q=(isNaN(j)?64:((j&15)<<2)|(g>>6));p=(isNaN(j)||isNaN(g))?64:g&63;d=d+h.charAt(s)+h.charAt(r)+h.charAt(q)+h.charAt(p)}return d},decode:function(f){var d="",p=0,h=this.map,g=String.fromCharCode,t,s,r,q,l,k,j;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(p<f.length){t=h.indexOf(f.charAt(p++));s=h.indexOf(f.charAt(p++));r=h.indexOf(f.charAt(p++));q=h.indexOf(f.charAt(p++));l=(t<<2)|(s>>4);k=((s&15)<<4)|(r>>2);j=((r&3)<<6)|q;d=d+(g(l)+((r!=64)?g(k):""))+(((q!=64)?g(j):""))}return this.utf8.decode(d)},utf8:{encode:function(j){var f="",d=0,h=String.fromCharCode,g;while(d<j.length){g=j.charCodeAt(d++);f=f+((g<128)?h(g):((g>127)&&(g<2048))?(h((g>>6)|192)+h((g&63)|128)):(h((g>>12)|224)+h(((g>>6)&63)|128)+h((g&63)|128)))}return f},decode:function(k){var g="",f=0,j=String.fromCharCode,d,h;while(f<k.length){h=k.charCodeAt(f);g=g+((h<128)?[j(h),f++][0]:((h>191)&&(h<224))?[j(((h&31)<<6)|((d=k.charCodeAt(f+1))&63)),(f+=2)][0]:[j(((h&15)<<12)|(((d=k.charCodeAt(f+1))&63)<<6)|((c3=k.charCodeAt(f+2))&63)),(f+=3)][0])}return g}}}},{}],12:[function(b,c,a){c.exports=function(g,d,f){var h;if(!g){return 0}f=!f?g:f;if(g instanceof Array){for(h=0;h<g.length;h++){if(d.call(f,g[h],h,g)===false){return 0}}}else{for(h in g){if(g.hasOwnProperty(h)){if(d.call(f,g[h],h,g)===false){return 0}}}}return 1}},{}],13:[function(b,c,a){c.exports=function(f){for(var d=1;d<arguments.length;d++){for(var g in arguments[d]){f[g]=arguments[d][g]}}return f}},{}],14:[function(b,c,a){function d(l){var f={},g,i=/\+/g,h=/([^&=]+)=?([^&]*)/g,k=function(m){return decodeURIComponent(m.replace(i," "))},j=l.split("?")[1];while(!!(g=h.exec(j))){f[k(g[1])]=k(g[2])}return f}c.exports=d},{}],15:[function(c,d,b){d.exports=f;function f(g){if(g){return a(g)}}function a(h){for(var g in f.prototype){h[g]=f.prototype[g]}return h}f.prototype.on=f.prototype.addEventListener=function(h,g){this._callbacks=this._callbacks||{};(this._callbacks["$"+h]=this._callbacks["$"+h]||[]).push(g);return this};f.prototype.once=function(i,h){function g(){this.off(i,g);h.apply(this,arguments)}g.fn=h;this.on(i,g);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(l,j){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var k=this._callbacks["$"+l];if(!k){return this}if(1==arguments.length){delete this._callbacks["$"+l];return this}var g;for(var h=0;h<k.length;h++){g=k[h];if(g===j||g.fn===j){k.splice(h,1);break}}return this};f.prototype.emit=function(l){this._callbacks=this._callbacks||{};var h=[].slice.call(arguments,1),k=this._callbacks["$"+l];if(k){k=k.slice(0);for(var j=0,g=k.length;j<g;++j){k[j].apply(this,h)}}return this};f.prototype.listeners=function(g){this._callbacks=this._callbacks||{};return this._callbacks["$"+g]||[]};f.prototype.hasListeners=function(g){return !!this.listeners(g).length}},{}]},{},[1]);